# RC 탱크 부품 배선도

## 전체 시스템 배선도

```
                    ┌─────────────────┐
                    │   12V 전원공급    │
                    └─────────┬───────┘
                              │
                    ┌─────────▼───────┐
                    │   5V 레귤레이터   │
                    └─────────┬───────┘
                              │
        ┌─────────────────────┼─────────────────────┐
        │                     │                     │
   ┌────▼────┐          ┌─────▼────┐          ┌────▼────┐
   │  ESP32  │          │ DFPlayer │          │ 헤드라이트│
   │         │          │   Mini   │          │   LED   │
   └────┬────┘          └─────┬────┘          └────┬────┘
        │                     │                     │
        │                     │                     │
   ┌────▼────┐          ┌─────▼────┐          ┌────▼────┐
   │ DRV8833 │          │  스피커   │          │  5V 전원 │
   │   #1    │          │          │          │         │
   └────┬────┘          └──────────┘          └─────────┘
        │
   ┌────▼────┐
   │ DRV8833 │
   │   #2    │
   └────┬────┘
        │
   ┌────▼────┐
   │  모터들  │
   │         │
   └─────────┘
```

## ESP32 핀 배선도

```
ESP32 DevKit V1
┌─────────────────────────────────────────┐
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
└─────────────────────────────────────────┘

핀 연결:
GPIO 2  ──► LED (포신/기관총 발사 표시)
GPIO 4  ──► 헤드라이트 LED
GPIO 5  ──► 포 마운트 서보 모터 (신호)
GPIO 12 ──► 터렛 모터 IN1 (DRV8833 #2)
GPIO 13 ──► 우측 트랙 IN2 (DRV8833 #1)
GPIO 14 ──► 터렛 모터 IN2 (DRV8833 #2)
GPIO 18 ──► 포신 서보 모터 (신호)
GPIO 25 ──► 좌측 트랙 IN1 (DRV8833 #1)
GPIO 26 ──► 좌측 트랙 IN2 (DRV8833 #1)
GPIO 27 ──► 우측 트랙 IN1 (DRV8833 #1)
GPIO 32 ──► DFPlayer RX
GPIO 33 ──► DFPlayer TX
```

## DRV8833 모터 드라이버 배선도

### DRV8833 #1 (좌측/우측 트랙)

```
DRV8833 #1
┌─────────────────────────────────────────┐
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │A│ │A│ │B│ │B│ │ │ │ │ │ │ │ │ │      │
│  │I│ │O│ │I│ │O│ │ │ │ │ │ │ │ │ │      │
│  │N│ │U│ │N│ │U│ │ │ │ │ │ │ │ │ │      │
│  │1│ │T│ │1│ │T│ │ │ │ │ │ │ │ │ │      │
│  │ │ │1│ │ │ │1│ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │A│ │A│ │B│ │B│ │ │ │ │ │ │ │ │ │      │
│  │I│ │O│ │I│ │O│ │ │ │ │ │ │ │ │ │      │
│  │N│ │U│ │N│ │U│ │ │ │ │ │ │ │ │ │      │
│  │2│ │T│ │2│ │T│ │ │ │ │ │ │ │ │ │      │
│  │ │ │2│ │ │ │2│ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │V│ │G│ │V│ │ │ │ │ │ │ │ │ │ │ │      │
│  │M│ │N│ │C│ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │D│ │C│ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
└─────────────────────────────────────────┘

연결:
AIN1 ──► GPIO 25 (좌측 트랙 IN1)
AIN2 ──► GPIO 26 (좌측 트랙 IN2)
AOUT1 ──► 좌측 트랙 모터 1 (+)
AOUT2 ──► 좌측 트랙 모터 2 (-)
BIN1 ──► GPIO 27 (우측 트랙 IN1)
BIN2 ──► GPIO 13 (우측 트랙 IN2)
BOUT1 ──► 우측 트랙 모터 1 (+)
BOUT2 ──► 우측 트랙 모터 2 (-)
VM ──► 12V 전원
GND ──► 공통 접지
VCC ──► 3.3V (논리 전원)
```

### DRV8833 #2 (터렛)

```
DRV8833 #2
┌─────────────────────────────────────────┐
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │A│ │A│ │B│ │B│ │ │ │ │ │ │ │ │ │      │
│  │I│ │O│ │I│ │O│ │ │ │ │ │ │ │ │ │      │
│  │N│ │U│ │N│ │U│ │ │ │ │ │ │ │ │ │      │
│  │1│ │T│ │1│ │T│ │ │ │ │ │ │ │ │ │      │
│  │ │ │1│ │ │ │1│ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │A│ │A│ │B│ │B│ │ │ │ │ │ │ │ │ │      │
│  │I│ │O│ │I│ │O│ │ │ │ │ │ │ │ │ │      │
│  │N│ │U│ │N│ │U│ │ │ │ │ │ │ │ │ │      │
│  │2│ │T│ │2│ │T│ │ │ │ │ │ │ │ │ │      │
│  │ │ │2│ │ │ │2│ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │V│ │G│ │V│ │ │ │ │ │ │ │ │ │ │ │      │
│  │M│ │N│ │C│ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │D│ │C│ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
└─────────────────────────────────────────┘

연결:
AIN1 ──► GPIO 12 (터렛 IN1)
AIN2 ──► GPIO 14 (터렛 IN2)
AOUT1 ──► 터렛 모터 (+)
AOUT2 ──► 터렛 모터 (-)
VM ──► 12V 전원
GND ──► 공통 접지
VCC ──► 3.3V (논리 전원)
```

## 서보 모터 배선도

### 포 마운트 서보 모터

```
포 마운트 서보 모터 (각도 조절)
┌─────────────────┐
│                 │
│    ┌─────┐      │
│    │     │      │
│    │     │      │
│    └─────┘      │
│                 │
└─────────────────┘

연결:
신호선 ──► GPIO 5
전원   ──► 5V
접지   ──► 공통 접지
기능   ──► D-PAD 상하로 포 마운트 각도 조절
```

### 포신 서보 모터

```
포신 서보 모터 (당기기)
┌─────────────────┐
│                 │
│    ┌─────┐      │
│    │     │      │
│    │     │      │
│    └─────┘      │
│                 │
└─────────────────┘

연결:
신호선 ──► GPIO 18
전원   ──► 5V
접지   ──► 공통 접지
기능   ──► A 버튼으로 포신 당기기
```

## DFPlayer Mini 배선도

```
DFPlayer Mini
┌─────────────────────────────────────────┐
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │R│ │T│ │V│ │G│ │ │ │ │ │ │ │ │ │      │
│  │X│ │X│ │C│ │N│ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │C│ │D│ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
│  ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐ ┌─┐      │
│  │S│ │S│ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │P│ │P│ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │K│ │K│ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │_│ │_│ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  │1│ │2│ │ │ │ │ │ │ │ │ │ │ │ │ │      │
│  └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘ └─┘      │
│                                         │
└─────────────────────────────────────────┘

연결:
RX ──► GPIO 33 (ESP32 TX)
TX ──► GPIO 32 (ESP32 RX)
VCC ──► 5V
GND ──► 공통 접지
SPK_1 ──► 스피커 (+)
SPK_2 ──► 스피커 (-)
```

## LED 배선도

### 상태 LED

```
상태 LED (GPIO 2)
┌─────┐
│  ⚪  │
└─────┘

연결:
+ ──► GPIO 2
- ──► 220Ω 저항 ──► GND

기능: 포신/기관총 발사 시 깜빡임
```

### 헤드라이트 LED

```
헤드라이트 LED (GPIO 4)
┌─────┐
│  ⚪  │
└─────┘

연결:
+ ──► GPIO 4
- ──► 220Ω 저항 ──► GND

기능: 헤드라이트 ON/OFF
```

## 전원 공급 배선도

```
전원 공급 시스템
┌─────────────────┐
│   12V 배터리     │
└─────────┬───────┘
          │
    ┌─────▼─────┐
    │ 5V 레귤레이터 │
    └─────┬─────┘
          │
    ┌─────▼─────┐
    │   분배     │
    └─────┬─────┘
          │
    ┌─────▼─────┐
    │ 5V 공급    │
    └───────────┘

연결:
12V ──► DRV8833 VM (모터 전원)
5V  ──► 서보 모터, DFPlayer, LED
3.3V ──► ESP32, DRV8833 VCC (논리 전원)
GND ──► 모든 부품 공통 접지
```

## 전체 배선 체크리스트

### 필수 연결 확인사항

- [ ] ESP32 전원 공급 (USB 또는 3.3V)
- [ ] 12V 전원 → DRV8833 VM
- [ ] 5V 전원 → 서보 모터, DFPlayer, LED
- [ ] 모든 GND 연결
- [ ] 모터 연결 (극성 확인)
- [ ] 서보 모터 신호선 연결
- [ ] DFPlayer 통신선 연결
- [ ] LED 저항 연결

### 안전 주의사항

1. **전원 공급 전 모든 연결 확인**
2. **모터 극성 확인 (반대로 연결 시 모터 손상 가능)**
3. **LED에 반드시 저항 연결 (220Ω 권장)**
4. **서보 모터 전원은 5V로 제한**
5. **DRV8833 논리 전원은 3.3V로 제한**

### 문제 해결 팁

- **모터가 작동하지 않음**: 전원 공급 및 극성 확인
- **서보가 작동하지 않음**: 5V 전원 및 신호선 확인
- **효과음이 나오지 않음**: DFPlayer 통신선 및 SD카드 확인
- **LED가 너무 밝음**: 저항 값 증가
- **ESP32가 재부팅됨**: 전원 공급 부족 가능성
